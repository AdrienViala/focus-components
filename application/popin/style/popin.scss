// Parameters

$small-size: 100/3;
$medium-size: 100/2;
$large-size: 200/3;

$overlay-background-color: rgba(0, 0, 0, 0.4);
$full-margin-top: 80px;

$menu-width: 100px;
$fill-height-popin-margin: 200px;

// Mixins

@mixin set-popin-window-size($width, $full_height, $menu-offset, $level) {
  [data-focus='popin-window'] {
    @if $menu-offset == 'true' {
      @if $level == '0' {
        min-width: calc(#{$width}vw - #{$menu-width});
        left: calc(#{$menu-width} + #{$level} * #{$width}vw);
      } @else {
        min-width: #{$width}vw;
        left: calc(#{$level} * #{$width}vw);
      }
    } @else {
      min-width: #{$width}vw;
    }
    @if $full_height == 'true' {
      min-height: 100vh;
    } @else {
      min-height: #{$width}vh;
    }
  }
}

@mixin all-popin-sizes ($fill-height:'false', $menu-offset:'false', $level:'0') {
  &[data-size='small'] {
    @include set-popin-window-size($small-size, #{$fill-height}, #{$menu-offset}, #{$level});
  }

  &[data-size='medium'] {
    @include set-popin-window-size($medium-size, #{$fill-height}, #{$menu-offset}, #{$level});
  }

  &[data-size='large'] {
    @include set-popin-window-size($large-size, #{$fill-height}, #{$menu-offset}, #{$level});
  }
}


// Style

[data-focus='popin'] {

  &[data-type='full'] {

    @include all-popin-sizes();

    [data-focus='popin-overlay'] {
      z-index: 1001;
      display: block;
      text-align: center;
      overflow-y: auto;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 100vh;

      [data-focus='popin-window'] {
        margin-top: $full-margin-top;
        margin-bottom: $full-margin-top;
        display: inline-block;
        margin-left: auto;
        margin-right: auto;
      }
    }
  }

  &[data-type='from-menu'] {

    &[data-level='0'] {
      @include all-popin-sizes('true', 'true', '0');
    }

    &[data-level='1'] {
      @include all-popin-sizes('true', 'true', '1');
    }

    &[data-level='2'] {
      @include all-popin-sizes('true', 'true', '2');
    }

    [data-focus='popin-overlay'] {
      z-index: 999;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;

      [data-focus='popin-window'] {
        position: fixed;
        top:0;
      }
    }
  }

  &[data-type='fill-height'] {

    @include all-popin-sizes('true');

    [data-focus='popin-overlay'] {
      z-index: 1001;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;

      [data-focus='popin-window'] {
        position: fixed;
        top:0;
        left: $fill-height-popin-margin;
      }
    }
  }

  [data-focus='popin-overlay'] {
    background-color: $overlay-background-color;

    [data-focus='popin-window'] {
      background-color: white;
      z-index: 1000;
      padding: 10px;

      .fa-close {
        float: right;
        cursor: pointer;
      }
    }
  }
}